# CriptoIndex - Back-end

![Badge](https://img.shields.io/badge/types-Flow%20%7C%20TypeScript-blue)
![Badge](https://img.shields.io/badge/node-%3E%3D%2012.18.2-brightgreen)
![Badge](https://img.shields.io/badge/PostgreSQL-v12.0-lightblue)

## Project Status

> 🚧 under development

## Topics

🔹 [Project description](#link-project-description)

🔹 [Functionalities](#information_source-functionalities)

🔹 [Prerequisites](#sparkles-prerequisites)

🔹 [Start/Configure database](#floppy_disk-start/configure-database)

🔹 [How to run the application](#arrow_forward-how-to-run-the-application)

🔹 [E-mail](#mailbox-e-mail)

🔹 [How to run the tests](#building_construction-how-to-run-the-tests)

🔹 [Insomnia](#sleeping-insomnia)

🔹 [API data](#scroll-api-data)

🔹 [Open tasks](#pencil-open-tasks)

🔹 [Developers](#octopus-developers)

## :link: Project description

<p align="justify">

  In this project I am based on the instructions for the [challenge](https://github.com/betrybe/technical-test), I create an API to register, login, recover password, validate fields, list monetary values and list values based on an amount of a currency type. The CriptoIndex API will make requests to the [CoinDesk](https://www.coindesk.com/coindesk-api) API to generate custom JSONs in order to satisfy the requirements.

</p>

## :information_source: Functionalities

:heavy_check_mark: Login

:heavy_check_mark: Register

:heavy_check_mark: Password recovery by email

:heavy_check_mark: List and update monetary values

:heavy_check_mark: List and update currency values

## :sparkles: Prerequisites

⚠️ [Node](https://nodejs.org/en/download/)

⚠️ [Yarn](https://yarnpkg.com/getting-started/install)

⚠️ [Docker](https://www.docker.com/products/docker-desktop)

⚠️ [PostgreSQL Docker](https://hub.docker.com/_/postgres)

## :floppy_disk: Start/Configure database

❗️ You will need to follow the steps below to be able to run the application on your machine.

Have Docker and PostgreSQL, MongoDB and Redis images installed.

### :elephant: Install PostgreSQL via Docker

* `docker run --name CriptoIndexPostgre -e POSTGRES_PASSWORD=docker -p 5432:5432 -d postgres`
* Check if the image is rotating: `docker ps`
* User: postgres
* Password: docker
* Terminal access: `docker exec -it nome_do_container bash`

### :dolphin: Create PostgreSQL Database

1. Install DBeaver, or another Database manager, or do it from the command line.
2. Access with the aforementioned username and password.
3. Create a Database with the name __CriptoIndex__.

## :arrow_forward: How to run the application

Now navigate to the created folder and open it in Visual Studio Code, run the command `yarn` inside the folder on your terminal to install all dependencies.

Perform migrations to the database: `yarn typeorm migration:run`.

After installation, type: `yarn dev:server`.

Ready! Now just access the application from the link: http://localhost:3333/ via insomnia, or via the web front-end.

## :mailbox: E-mail

To use the user's password recovery function, the terminal must be open, as Ethereal will generate a link to access the inbox with the token.

In Insomnia under _Reset password_, enter the token generated in _ "token:": "" _ in the empty space and click _Send_.

## :building_construction: How to run the tests

In the same folder as the project, in the terminal, type:

```bash
yarn test
```

## :sleeping: Insomnia

Download the [insomnia](https://insomnia.rest/download/), to use the same workspace used in the project click [here](https://github.com/MGustav0/CriptoIndex/blob/development/extras/Insomnia_2020-11-30.json), download and import your insomnia.

To insert the token generated by the API in the _Authenticate_ route, click on _Dev_, below the project name, then on _Manage Environments_, paste your token acquired during authentication and, finally, click on _Done_. Ready! You are logged in to the application!

## :scroll: API data

### Registration

<img src="" width="640" heigth="360" />

### Login

<img src="" width="640" heigth="360" />

### Forgot password

<img src="" width="640" heigth="360" />

### Recovery Email

<img src="" width="640" heigth="360" />

### Password Recovery

<img src="" width="640" heigth="360" />

### Update of quotes

<img src="" width="640" heigth="360" />

### Show currencies

<img src="" width="640" heigth="360" />

## :pencil: Open tasks

🖊 Veja no [trello!](https://trello.com/b/i927X7pr/criptoindex)

## :octopus: Developers

| [<img src="https://avatars1.githubusercontent.com/u/18315899?s=460&u=54d9c6ea66f2b27120bf39dabe1d36ff22a92b9d&v=4>][(https://github.com/MGustav0](https://avatars1.githubusercontent.com/u/18315899?s=460&u=54d9c6ea66f2b27120bf39dabe1d36ff22a92b9d&v=4))" width=115><br><sub>Gustavo Moreira</sub>](https://github.com/MGustav0) |
| :---: |

## :copyright: License

The [MIT License](https://opensource.org/licenses/MIT) - Use freely, I am not responsible for the actions of third parties.
